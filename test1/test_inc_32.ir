#define	_STACK_ALIGN16_BEGIN	\
	asm "pushl %ebp\n";	\
	asm "movl %esp, %ebp\n";	\
	asm "subl $16, %esp\n";	\
	asm "andl $0xfffffff0, %esp\n";

#define	_STACK_ALIGN16_END	\
	asm "movl %ebp, %esp\n";	\
	asm "popl %ebp\n";

#define	_LINE	asm "\n#------------------------------\n\n";

function _print_int8(str:*char, n:int8) {
	asm_set_reg "%eax", str;
	asm_set_reg "%bl", n;
	asm "movsbl %bl, %ebx;\n";

	_STACK_ALIGN16_BEGIN

	_LINE

	asm "subl $12, %esp\n";
	asm "pushl %eax\n";
	asm "calll printf\n";
	asm "addl $16, %esp\n";

	_LINE
	
	asm_set_reg "%eax", "%d\n";
	asm "subl $8, %esp\n";
	asm "pushl %ebx\n";
	asm "pushl %eax\n";
	asm "calll printf\n";
	asm "addl $16, %esp\n";
	_LINE

	_STACK_ALIGN16_END
}